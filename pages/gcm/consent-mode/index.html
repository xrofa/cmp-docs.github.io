
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../../assets/general/favicon.ico">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.6">
    
    
      
        <title>Google Consent Mode - Usercentrics CMP Browser</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.cd566b2a.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7C&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:""}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  <script id="usercentrics-cmp" data-settings-id="iuVJ-_y0f" src="https://app.usercentrics.eu/browser-ui/latest/loader.js" async ></script>

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#google-consent-mode" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Usercentrics CMP Browser" class="md-header__button md-logo" aria-label="Usercentrics CMP Browser" data-md-component="logo">
      
  <img src="../../../assets/general/usercentrics-logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Usercentrics CMP Browser
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Google Consent Mode
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        Getting Started
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../ui/" class="md-tabs__link">
        Browser UI
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../sdk/implementation-optional-steps/" class="md-tabs__link">
        Browser SDK
      </a>
    </li>
  

      
        
  
  
    
  


  <li class="md-tabs__item">
    <a href="./" class="md-tabs__link md-tabs__link--active">
      Google Consent Mode
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../gtm/configuration/" class="md-tabs__link">
        Google Tag Manager
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../features/tcf2/" class="md-tabs__link">
        Features
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Usercentrics CMP Browser" class="md-nav__button md-logo" aria-label="Usercentrics CMP Browser" data-md-component="logo">
      
  <img src="../../../assets/general/usercentrics-logo.svg" alt="logo">

    </a>
    Usercentrics CMP Browser
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_1" type="checkbox" id="__nav_1" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../..">Getting Started</a>
          
            <label for="__nav_1">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Getting Started" data-md-level="1">
        <label class="md-nav__title" for="__nav_1">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/ui/" class="md-nav__link">
        Browser UI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/sdk/" class="md-nav__link">
        Browser SDK
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/browser-support/" class="md-nav__link">
        Browser Support
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../ui/">Browser UI</a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Browser UI" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Browser UI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ui/implementation-optional-steps/" class="md-nav__link">
        Implementation (Optional Steps)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ui/adjusting-implemented-scripts/" class="md-nav__link">
        Adjusting Implemented Scripts
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_4" type="checkbox" id="__nav_2_4" >
      
      
      
        
          
            
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../guides/">Guides</a>
          
            <label for="__nav_2_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" aria-label="Guides" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/guide-example/" class="md-nav__link">
        First Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../guides/guide-example/" class="md-nav__link">
        Second Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/custom-css/" class="md-nav__link">
        Custom CSS
      </a>
    </li>
  

            
          
            
              
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_6" type="checkbox" id="__nav_2_6" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2_6">
          Browser UI API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Browser UI API" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_6">
          <span class="md-nav__icon md-icon"></span>
          Browser UI API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/control-the-ui/" class="md-nav__link">
        Control the UI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api/custom-functionality/" class="md-nav__link">
        Custom Functionality
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3">
          Browser SDK
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Browser SDK" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Browser SDK
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sdk/implementation-optional-steps/" class="md-nav__link">
        Implementation (Optional Steps)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../sdk/modules/" class="md-nav__link">
        Technical SDK
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Google Consent Mode
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Google Consent Mode
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#general-information" class="md-nav__link">
    General Information
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-example" class="md-nav__link">
    Implementation Example
  </a>
  
    <nav class="md-nav" aria-label="Implementation Example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-adjust-the-existing-google-tag-manager-code" class="md-nav__link">
    Step 1: Adjust the existing Google Tag Manager code
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-optional-use-the-usercentrics-cmp-events-to-signal-the-consent-status-via-the-consent-mode-api-for-custom-data-processing-services" class="md-nav__link">
    Step 2 (optional): Use the Usercentrics CMP events to signal the consent status via the Consent Mode API for Custom Data Processing Services
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-enable-google-consent-mode-on-the-usercentrics-admin-interface" class="md-nav__link">
    Step 3: Enable Google Consent Mode on the Usercentrics Admin Interface
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5">
          Google Tag Manager
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Google Tag Manager" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Google Tag Manager
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gtm/configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../gtm/templates/" class="md-nav__link">
        Templates
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6">
          Features
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Features" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Features
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/tcf2/" class="md-nav__link">
        TCF 2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/events/" class="md-nav__link">
        Events
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/embeddings/" class="md-nav__link">
        Embeddings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../features/smart-data-protector/" class="md-nav__link">
        Smart Data Protector
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#general-information" class="md-nav__link">
    General Information
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-example" class="md-nav__link">
    Implementation Example
  </a>
  
    <nav class="md-nav" aria-label="Implementation Example">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-adjust-the-existing-google-tag-manager-code" class="md-nav__link">
    Step 1: Adjust the existing Google Tag Manager code
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-optional-use-the-usercentrics-cmp-events-to-signal-the-consent-status-via-the-consent-mode-api-for-custom-data-processing-services" class="md-nav__link">
    Step 2 (optional): Use the Usercentrics CMP events to signal the consent status via the Consent Mode API for Custom Data Processing Services
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-enable-google-consent-mode-on-the-usercentrics-admin-interface" class="md-nav__link">
    Step 3: Enable Google Consent Mode on the Usercentrics Admin Interface
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

<h1 id="google-consent-mode">Google Consent Mode</h1>
<h2 id="general-information">General Information</h2>
<p>With <a href="https://support.google.com/analytics/answer/9976101?hl=en">Consent Mode</a> Google has provided a solution for advertisers to adjust the behaviour of Google tags on their website based on the user consent status. 
By pairing the Consent Mode API with the Usercentrics Consent Management Platform (CMP) advertisers can indicate if the user has given consent for cookie usage related to ads and/or advertising.  The supported Google tags will respect this signal and adjust their behaviour accordingly only utilizing cookies if consent was granted for the specific purposes.</p>
<p>!&gt; Google also supports the IABs TCF 2.0 framework with its ad systems. Consent Mode is meant to be used by advertisers <strong>not</strong> using a TCF 2.0 CMP implementation.</p>
<p>Following Google services currently support the Consent Mode:</p>
<ul>
<li>Google Analytics (template id: HkocEodjb7) -&gt; (Consent type: analytics_storage)</li>
<li>Google Analytics 4 (template id: 87JYasXPF) -&gt; (Consent type: analytics_storage)</li>
<li>Google Ads Conversion Tracking (template id: twMyStLkn) -&gt; (Consent type: ad_storage)</li>
<li>Google Ads Remarketing (template id: B1Hk_zoTX) -&gt; (Consent type: ad_storage)</li>
<li>Conversion Linker (template id: LykAT-gy) -&gt; (Consent type: ad_storage)</li>
<li>DoubleClick Floodlight (template id: ByzZ5EsOsZX) -&gt; (Consent type: ad_storage) <strong>DEPRECATED PRODUCT</strong></li>
<li>Google Campaign Manager (template id: pxiRY9112) -&gt; (Consent type: ad_storage) <strong>DEPRECATED PRODUCT</strong></li>
<li>Display &amp; Video 360 (template id: UekC8ye4S) -&gt; (Consent type: ad_storage) </li>
<li>Search Ads 360 (template id: DHS2sEi4b) -&gt; (Consent type: ad_storage)</li>
<li>Google Ads (template id: S1_9Vsuj-Q) -&gt; (Consent type: ad_storage)</li>
<li>Google Campaign Manager 360 (template id: dyHOCwp5Y) -&gt; (Consent type: ad_storage)</li>
</ul>
<p><strong>You may use the Consent Mode instead of prior blocking the Google tags</strong>. The benefit is that Google will use the signal to adjust the behaviour of their tags based on the user's consent in the Usercentrics CMP instead of having them blocked when no consent is given.</p>
<p>Details on the tag behaviour with Consent Mode can be found <a href="https://support.google.com/analytics/answer/9976101?hl=en">here</a>.</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>!&gt; Consent Mode requires that you use gtag.js or Google Tag Manager. If you use older tags versions (like ga.js or analytics.js) you need to update to the latest tag versions first.</p>
<h2 id="implementation-example">Implementation Example</h2>
<p>Implementing the Consent Mode with the Usercentrics CMP solution as alternative to prior blocking requires just 2 steps:</p>
<h3 id="step-1-adjust-the-existing-google-tag-manager-code">Step 1: Adjust the existing Google Tag Manager code</h3>
<p>Your current Google Tag Manager code may currently look like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>&lt;script type=&quot;text/plain&quot; data-usercentrics=&quot;Google Tag Manager&quot;&gt;
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({&#39;gtm.start&#39;:
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>new Date().getTime(),event:&#39;gtm.js&#39;});var f=d.getElementsByTagName(s)[0],
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>j=d.createElement(s),dl=l!=&#39;dataLayer&#39;?&#39;&amp;l=&#39;+l:&#39;&#39;;j.async=true;j.src=
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>&#39;https://www.googletagmanager.com/gtm.js?id=&#39;+i+dl;f.parentNode.insertBefore(j,f);
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>})(window,document,’script&#39;,&#39;dataLayer&#39;,&#39;GTM-XXXXXX&#39;);&lt;/script&gt;
</code></pre></div>
<p>This needs to be changed to the following:</p>
<p>!&gt; Please make sure to put these scripts at the very top of the head and on the same order as below.</p>
<blockquote>
<p>⚠️ To adjust the default measurement capabilities, set the default values for the command to run on every page of your site before any commands that send measurement data (such as config or event). For more information please check <a href="https://developers.google.com/tag-platform/devguides/consent#adjust_tag_behavior">Adjust Tag Behavior</a></p>
</blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>    &lt;script type=&quot;text/javascript&quot;&gt;
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>        // create dataLayer
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>        window.dataLayer = window.dataLayer || [];
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>        function gtag() {
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>            dataLayer.push(arguments);
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>        }
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>        // set „denied&quot; as default for both ad and analytics storage,
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>        gtag(&quot;consent&quot;, &quot;default&quot;, {
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>            ad_storage: &quot;denied&quot;,
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>            analytics_storage: &quot;denied&quot;,
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>            wait_for_update: 2000 // milliseconds to wait for update
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>        });
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>        // Enable ads data redaction by default [optional]
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>        gtag(&quot;set&quot;, &quot;ads_data_redaction&quot;, true);
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>    &lt;/script&gt;
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>    &lt;script type=&quot;text/javascript&quot;&gt;
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>        // Google Tag Manager
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>        (function(w, d, s, l, i) {
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>            w[l] = w[l] || [];
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>            w[l].push({
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>                &#39;gtm.start&#39;: new Date().getTime(),
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>                event: &#39;gtm.js&#39;
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>            });
<a id="__codelineno-1-27" name="__codelineno-1-27" href="#__codelineno-1-27"></a>            var f = d.getElementsByTagName(s)[0],
<a id="__codelineno-1-28" name="__codelineno-1-28" href="#__codelineno-1-28"></a>                j = d.createElement(s),
<a id="__codelineno-1-29" name="__codelineno-1-29" href="#__codelineno-1-29"></a>                dl = l != &#39;dataLayer&#39; ? &#39;&amp;l=&#39; + l : &#39;&#39;;
<a id="__codelineno-1-30" name="__codelineno-1-30" href="#__codelineno-1-30"></a>            j.async = true;
<a id="__codelineno-1-31" name="__codelineno-1-31" href="#__codelineno-1-31"></a>            j.src =
<a id="__codelineno-1-32" name="__codelineno-1-32" href="#__codelineno-1-32"></a>                &#39;https://www.googletagmanager.com/gtm.js?id=&#39; + i + dl;
<a id="__codelineno-1-33" name="__codelineno-1-33" href="#__codelineno-1-33"></a>            f.parentNode.insertBefore(j, f);
<a id="__codelineno-1-34" name="__codelineno-1-34" href="#__codelineno-1-34"></a>        })(window, document, &#39;script&#39;, &#39;dataLayer&#39;, &#39;GTM-XXXXX&#39;); //replace GTM-XXXXXX with Google Tag Manager ID
<a id="__codelineno-1-35" name="__codelineno-1-35" href="#__codelineno-1-35"></a>    &lt;/script&gt;
</code></pre></div>
<p><strong>Explanation</strong></p>
<ul>
<li>The first part of the script initializes a plain data layer and provides the gtag function before the gtm.js/gtag.js is loaded</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>&lt;script type=&quot;text/javascript&quot;&gt;
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>    // create dataLayer
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>    window.dataLayer = window.dataLayer || [];
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>    function gtag() {
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>        dataLayer.push(arguments);
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>    }
</code></pre></div>
<ul>
<li>In the middle part of the code the default values for both Consent Mode keys ad_storage and analytics_storage are defined. Additionally we set ads_data_redaction to true which means, that ad-click identifiers (e.g., GCLID / DCLID) in consent and conversion pings are redacted and network requests will also be sent through a cookieless domain. This is only in effect, when ad_storage is set to 'denied', if ad_storage is 'granted', ads_data_redaction has no effect. Setting ads_data_redaction to true is optional. More details on behaviour can be found <a href="https://support.google.com/analytics/answer/9976101?hl=en">here</a>.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>   // set „denied&quot; as default for both ad and analytics storage,
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>   gtag(&quot;consent&quot;, &quot;default&quot;, {
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>       ad_storage: &quot;denied&quot;,
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>       analytics_storage: &quot;denied&quot;,
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>       wait_for_update: 2000 // milliseconds to wait for update
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>   });
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>    // Enable ads data redaction by default [optional]
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>    gtag(&quot;set&quot;, &quot;ads_data_redaction&quot;, true);
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>    &lt;/script&gt;    
</code></pre></div>
<ul>
<li>The last part is the Google Tag Manager script. If you want to use Consent Mode as alternative to prior blocking the type of the script tag is "text/javascript". If you use the <a href="smart-data-protector.md">Smart Data Protector</a> you may have to exclude Google Tag Manager, Google Analytics and/or Google Ads Remarkting from the blocking by SDP.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>&lt;script type=&quot;text/javascript&quot;&gt;
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>    // Google Tag Manager
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>    (function(w, d, s, l, i) { 
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>        w[l] = w[l] || [];
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>        w[l].push({
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>            &#39;gtm.start&#39;: new Date().getTime(),
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>            event: &#39;gtm.js&#39;
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>        });
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>        var f = d.getElementsByTagName(s)[0],
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>            j = d.createElement(s),
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>            dl = l != &#39;dataLayer&#39; ? &#39;&amp;l=&#39; + l : &#39;&#39;;
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>        j.async = true;
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>        j.src =
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>            &#39;https://www.googletagmanager.com/gtm.js?id=&#39; + i + dl;
<a id="__codelineno-4-15" name="__codelineno-4-15" href="#__codelineno-4-15"></a>        f.parentNode.insertBefore(j, f);
<a id="__codelineno-4-16" name="__codelineno-4-16" href="#__codelineno-4-16"></a>    })(window, document, &#39;script&#39;, &#39;dataLayer&#39;, &#39;GTM-XXXXX&#39;); //replace GTM-XXXXXX with Google Tag Manager ID
<a id="__codelineno-4-17" name="__codelineno-4-17" href="#__codelineno-4-17"></a>&lt;/script&gt;
</code></pre></div>
<h3 id="step-2-optional-use-the-usercentrics-cmp-events-to-signal-the-consent-status-via-the-consent-mode-api-for-custom-data-processing-services">Step 2 (optional): Use the Usercentrics CMP events to signal the consent status via the Consent Mode API for Custom Data Processing Services</h3>
<p>!&gt; In case you use custom data processing services, follow the steps below. Otherwise, please jump to step 3.</p>
<p>In order to trigger the Consent Mode API for custom Data Processing Services, you need to first add a window event. On the <a href="https://admin.usercentrics.eu/">Admin Interface</a> under <strong>Implementation -&gt; Web</strong> please click on <strong>Add new Data Layer</strong> and select <strong>Window Event</strong>. Then expand the <strong>Window Event</strong> card and on the <strong>Window Event Name</strong> field, please insert the name of the event. It can be anything, but just make sure to use the same event name on the script below. Then click on the <strong>+</strong> button and click <strong>Save</strong>.</p>
<p>Assuming you already have a window event in your Usercentrics CMP, add the following script to call the Consent Mode API in order to update the consent mode keys based on the consent status.
In this example we use the event name 'ucEvent' and the 2 custom data processing services 'Google Ads Remarketing' and 'Google Analytics'.
(If you have chosen to use different names for the data processing services use your customized ones instead.)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>&lt;script type=&quot;text/javascript&quot;&gt;
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>// Please replace &#39;ucEvent&#39; with the event you have just created
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>window.addEventListener(&quot;ucEvent&quot;, function (e) {
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>    if( e.detail &amp;&amp; e.detail.event == &quot;consent_status&quot;) {
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>        // Please replace the analytics service name here with the customized service    
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>        var ucAnalyticsService = &#39;Google Analytics&#39;;
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>        // Please replace the ad service name here with the customized service
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>        var ucAdService = &#39;Google Ads Remarketing&#39;;
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>        if(e.detail.hasOwnProperty(ucAnalyticsService) &amp;&amp; e.detail.hasOwnProperty(ucAdService))
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>        {
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>            gtag(&quot;consent&quot;, &quot;update&quot;, {
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>                ad_storage: e.detail[ucAdService] ? &#39;granted&#39;:&#39;denied&#39;,
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>                analytics_storage: e.detail[ucAnalyticsService] ? &#39;granted&#39;:&#39;denied&#39;
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>            });
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>        }
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>        else {            
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a>            if(e.detail.hasOwnProperty(ucAdService)) {
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a>                gtag(&quot;consent&quot;, &quot;update&quot;, {
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a>                    ad_storage: e.detail[ucAdService] ? &#39;granted&#39;:&#39;denied&#39;
<a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a>                });
<a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a>            }            
<a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a>            if(e.detail.hasOwnProperty(ucAnalyticsService)) {
<a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a>              gtag(&quot;consent&quot;, &quot;update&quot;, {
<a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a>                    analytics_storage: e.detail[ucAnalyticsService] ? &#39;granted&#39;:&#39;denied&#39;
<a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a>                });
<a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a>            }
<a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a>        }
<a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a>    }
<a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a>});
<a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a>&lt;/script&gt;
</code></pre></div>
<p><strong>Explanation</strong></p>
<ul>
<li>The event is fired on each page load and every time the user actively changes his consent decision.</li>
<li>Based on the status for both services the Consent Mode API is called to signal the granted or denied state.</li>
</ul>
<h3 id="step-3-enable-google-consent-mode-on-the-usercentrics-admin-interface">Step 3: Enable Google Consent Mode on the Usercentrics Admin Interface</h3>
<p>!&gt; For new customers, Google Consent Mode is enabled by default.</p>
<p>Assuming you've completed the steps above, it's now time to enable the feature.</p>
<p>Go to <strong>Usercentrics Admin Interface -&gt; Configuration -&gt; CMP Settings</strong>, enable Google Consent Mode and click Save.</p>
<blockquote>
<p><a href="browser-cmp?id=features">← Back to Feature Overview</a></p>
</blockquote>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      © Copyright 2022 Usercentrics GmbH
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.annotate", "navigation.tabs", "navigation.tabs.sticky", "search.suggest", "navigation.sections", "navigation.indexes"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../assets/javascripts/workers/search.22074ed6.min.js"}</script>
    
    
      <script src="../../../assets/javascripts/bundle.1514a9a0.min.js"></script>
      
        <script src="../../../javascripts/extra.js"></script>
      
    
  </body>
</html>